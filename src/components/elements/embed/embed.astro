---
const {
  src,
  title = "Embedded Content",
  aspect_ratio = "landscape",
  class: className,
  ...restProps
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(restProps).filter(([key]) => !key.startsWith("_"))
);
---

<iframe
  class:list={["embed", `ratio-${aspect_ratio}`, className]}
  src={src}
  frameborder="0"
  allowfullscreen="true"
  allowtransparency="true"
  referrerpolicy="no-referrer"
  sandbox="allow-scripts allow-forms"
  loading="lazy"
  title={title}
  {...htmlAttributes}></iframe>

<style>
  .embed {
    width: 100%;
    height: 100%;
    border: none;
    display: block;

    &.ratio-square {
      aspect-ratio: var(--ratio-square);
    }

    &.ratio-landscape {
      aspect-ratio: var(--ratio-landscape);
    }

    &.ratio-portrait {
      aspect-ratio: var(--ratio-portrait);
    }

    &.ratio-widescreen {
      aspect-ratio: var(--ratio-widescreen);
    }

    &.ratio-golden {
      aspect-ratio: var(--ratio-golden);
    }
  }
</style>
