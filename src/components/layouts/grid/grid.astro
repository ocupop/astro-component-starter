---
import Component from "../../utils/renderBlock.astro";

const {
  minItemWidth = 200,
  maxItemWidth = 320,
  verticalAlignment = "start",
  horizontalAlignment = "center",
  equalWidth = true,
  class: className,
  style: userStyle,
  items = [],
  ...rest
} = Astro.props;

const htmlAttributes = Object.fromEntries(
  Object.entries(rest).filter(([key]) => !key.startsWith("_"))
);

const gridStyles = [
  equalWidth && `--min-width: ${minItemWidth}px`,
  equalWidth && `--max-width: ${maxItemWidth}px`,
  `--justify-content: ${horizontalAlignment}`,
  userStyle,
]
  .filter(Boolean)
  .join("; ");
---

<div
  class:list={[
    "grid",
    `align-${verticalAlignment}`,
    `justify-${horizontalAlignment}`,
    !equalWidth && "non-equal",
    className,
  ]}
  style={gridStyles}
  {...htmlAttributes}
>
  {
    items.map((item: any, index: number) => (
      <div class="grid-item">
        <Component contentBlocks={item.contentBlocks} />
      </div>
    ))
  }
</div>
